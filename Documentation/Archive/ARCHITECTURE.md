# MyKidStats Architecture - Phase 1

## Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APP LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MyKidStatsApp.swift                               â”‚  â”‚
â”‚  â”‚ - CoreDataStack injection                         â”‚  â”‚
â”‚  â”‚ - Environment setup                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ContentView.swift                                 â”‚  â”‚
â”‚  â”‚ - Main UI entry point                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DESIGN SYSTEM LAYER                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Colors    â”‚  â”‚   Fonts    â”‚  â”‚  Spacing   â”‚        â”‚
â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚        â”‚
â”‚  â”‚ â€¢ Semantic â”‚  â”‚ â€¢ Dynamic  â”‚  â”‚ â€¢ Layout   â”‚        â”‚
â”‚  â”‚ â€¢ Dark     â”‚  â”‚   Type     â”‚  â”‚   tokens   â”‚        â”‚
â”‚  â”‚   mode     â”‚  â”‚ â€¢ Type     â”‚  â”‚ â€¢ Button   â”‚        â”‚
â”‚  â”‚            â”‚  â”‚   scale    â”‚  â”‚   sizes    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DesignSystemPreview.swift                       â”‚   â”‚
â”‚  â”‚ - Visual verification                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DOMAIN LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Models                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚  LiveStats   â”‚  â”‚ CareerStats  â”‚              â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Real-time  â”‚  â”‚ â€¢ Aggregate  â”‚              â”‚  â”‚
â”‚  â”‚  â”‚   tracking   â”‚  â”‚   stats      â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Calculate  â”‚  â”‚ â€¢ Career     â”‚              â”‚  â”‚
â”‚  â”‚  â”‚   %          â”‚  â”‚   highs      â”‚              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Enums                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ StatType                                 â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ 13 basketball stats                    â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Point values                           â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Display properties (icon, color)       â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ GameResult                               â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Win/Loss/Tie/InProgress                â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATA LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CoreDataStack                                     â”‚  â”‚
â”‚  â”‚ â€¢ Singleton                                       â”‚  â”‚
â”‚  â”‚ â€¢ Main context (UI)                              â”‚  â”‚
â”‚  â”‚ â€¢ Background context (imports)                   â”‚  â”‚
â”‚  â”‚ â€¢ Auto-merge changes                             â”‚  â”‚
â”‚  â”‚ â€¢ In-memory stack (testing)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Core Data Model (.xcdatamodeld)                  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚  Child   â”‚   â”‚  Player  â”‚   â”‚   Team   â”‚    â”‚  â”‚
â”‚  â”‚  â”‚          â”‚   â”‚          â”‚   â”‚          â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ id     â”‚â†â”€â”€â”‚ â€¢ childIdâ”‚   â”‚ â€¢ id     â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ name   â”‚   â”‚ â€¢ teamId â”‚â”€â”€â†’â”‚ â€¢ name   â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ dob    â”‚   â”‚ â€¢ jersey â”‚   â”‚ â€¢ season â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ photo  â”‚   â”‚ â€¢ pos.   â”‚   â”‚ â€¢ active â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                      â”‚               â”‚          â”‚  â”‚
â”‚  â”‚                      â†“               â†“          â”‚  â”‚
â”‚  â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚                â”‚   Game   â”‚    â”‚StatEvent â”‚    â”‚  â”‚
â”‚  â”‚                â”‚          â”‚    â”‚          â”‚    â”‚  â”‚
â”‚  â”‚                â”‚ â€¢ id     â”‚â†â”€â”€â”€â”‚ â€¢ gameId â”‚    â”‚  â”‚
â”‚  â”‚                â”‚ â€¢ teamId â”‚    â”‚ â€¢ playerId   â”‚  â”‚
â”‚  â”‚                â”‚ â€¢ opp.   â”‚    â”‚ â€¢ statType   â”‚  â”‚
â”‚  â”‚                â”‚ â€¢ date   â”‚    â”‚ â€¢ value  â”‚    â”‚  â”‚
â”‚  â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Entity Extensions                                 â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  Child+Extensions                                â”‚  â”‚
â”‚  â”‚  â€¢ fetchLastUsed()                               â”‚  â”‚
â”‚  â”‚  â€¢ fetchAll()                                    â”‚  â”‚
â”‚  â”‚  â€¢ markAsUsed()                                  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  Player+Extensions                               â”‚  â”‚
â”‚  â”‚  â€¢ fetchForChild()                               â”‚  â”‚
â”‚  â”‚  â€¢ fetch(childId:teamId:)                       â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  Team+Extensions                                 â”‚  â”‚
â”‚  â”‚  â€¢ fetchActive(forChildId:)                     â”‚  â”‚
â”‚  â”‚  â€¢ makeActive()                                  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  Game+Extensions                                 â”‚  â”‚
â”‚  â”‚  â€¢ teamScore (computed)                          â”‚  â”‚
â”‚  â”‚  â€¢ result (computed)                             â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  StatEvent+Extensions                            â”‚  â”‚
â”‚  â”‚  â€¢ isPointEvent (computed)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   UTILITIES LAYER                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DateFormatter+Extensions                          â”‚  â”‚
â”‚  â”‚ â€¢ gameDate (Medium + Time)                       â”‚  â”‚
â”‚  â”‚ â€¢ shortDate (Short)                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Example: Recording a Stat

```
User Taps "2PT Made" Button
         â†“
    UI Layer
         â†“
Domain Layer: LiveStats.recordStat(.twoPointMade)
         â†“
    â€¢ points += 2
    â€¢ fgMade += 1
    â€¢ fgAttempted += 1
    â€¢ updatePercentages()
         â†“
Data Layer: Create StatEvent
         â†“
    let event = StatEvent(context: context)
    event.id = UUID()
    event.statType = "TWO_MADE"
    event.value = 2
    event.timestamp = Date()
         â†“
CoreDataStack.save()
         â†“
    Persisted to SQLite
         â†“
    UI Updates (via @State/@Published)
```

---

## Relationship Diagram

```
             Child (Kid)
                â”‚
                â”‚ 1
                â”‚
                â”‚ N
             Player (Kid on Team)
              â•±   â•²
           N â•±     â•² N
            â•±       â•²
           â•±         â•²
        Team    StatEvent (Stat recorded)
         â”‚            â”‚
         â”‚ 1          â”‚ N
         â”‚            â”‚
         â”‚ N          â”‚ 1
        Game â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     (Match played)
```

### Relationships Explained

**Child â†’ Player (1:N)**
- One child can play on multiple teams (different seasons)
- Each Player instance represents the child on a specific team

**Player â†’ Team (N:1)**
- Many players belong to one team
- Delete team â†’ delete all players (Cascade)

**Player â†’ StatEvent (1:N)**
- One player has many stat events
- Delete player â†’ delete all their stats (Cascade)

**Team â†’ Game (1:N)**
- One team plays many games
- Delete team â†’ delete all games (Cascade)

**Game â†’ StatEvent (1:N)**
- One game has many stat events
- Delete game â†’ delete all stats (Cascade)

---

## Testing Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TEST LAYER                             â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ LiveStatsTests                                    â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ Unit Tests (20+ cases)                   â”‚    â”‚  â”‚
â”‚  â”‚  â”‚                                          â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Two-point shooting                     â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Three-point shooting                   â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Free throws                            â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Percentage calculations                â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Reverse stats (undo)                   â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Other stats (REB, AST, etc.)          â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Complex scenarios                      â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ StatTypeTests                                     â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ Unit Tests (15+ cases)                   â”‚    â”‚  â”‚
â”‚  â”‚  â”‚                                          â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Point values                           â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Display names                          â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Icons                                  â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Colors                                 â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Raw values                             â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ CaseIterable                           â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  Code Coverage: 80%+ âœ…                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Design System Token Flow

```
Design System Layer
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Semantic Tokens â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .spacingL = 16pt                    â”‚
â”‚ .statMade = Color.green             â”‚
â”‚ .playerName = .title2 semibold      â”‚
â”‚ .cornerRadiusCard = 16pt            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Used throughout UI                  â”‚
â”‚                                     â”‚
â”‚ Text("Name")                        â”‚
â”‚   .font(.playerName)                â”‚
â”‚   .foregroundColor(.primaryText)    â”‚
â”‚   .padding(.spacingL)               â”‚
â”‚                                     â”‚
â”‚ RoundedRectangle(                   â”‚
â”‚   cornerRadius: .cornerRadiusCard   â”‚
â”‚ )                                   â”‚
â”‚   .fill(Color.cardBackground)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
Consistent UI across entire app
Auto dark mode support âœ…
Easy to maintain/update âœ…
```

---

## State Management (Phase 1)

```
Core Data (Source of Truth)
         â†“
CoreDataStack.mainContext
         â†“
SwiftUI Environment
         â†“
@FetchRequest in Views
         â†“
Automatic UI Updates

Example:
@FetchRequest(
    sortDescriptors: [NSSortDescriptor(key: "name", ascending: true)]
)
var children: FetchedResults<Child>

ForEach(children) { child in
    Text(child.name)
}
```

---

## File Organization

```
MyKidStats/
â”‚
â”œâ”€â”€ App Layer (Entry points)
â”‚   â””â”€â”€ Dependency injection
â”‚
â”œâ”€â”€ Design System (Tokens & Components)
â”‚   â””â”€â”€ Shared across all features
â”‚
â”œâ”€â”€ Core Layer
â”‚   â”œâ”€â”€ Domain (Business logic)
â”‚   â”‚   â””â”€â”€ Pure Swift (no dependencies)
â”‚   â”œâ”€â”€ Data (Persistence)
â”‚   â”‚   â””â”€â”€ Core Data implementation
â”‚   â””â”€â”€ Utilities (Helpers)
â”‚       â””â”€â”€ Reusable extensions
â”‚
â””â”€â”€ Tests (Quality assurance)
    â””â”€â”€ Unit tests for business logic
```

**Benefits:**
- âœ… Clear separation of concerns
- âœ… Easy to find files
- âœ… Testable components
- âœ… Scalable structure
- âœ… Reusable code

---

## Next: Part 2 Architecture

Part 2 will add:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FEATURES LAYER (Coming)        â”‚
â”‚                                     â”‚
â”‚  â”œâ”€â”€ Home/                          â”‚
â”‚  â”œâ”€â”€ LiveGame/                      â”‚
â”‚  â”œâ”€â”€ Stats/                         â”‚
â”‚  â””â”€â”€ Teams/                         â”‚
â”‚                                     â”‚
â”‚  Each feature:                      â”‚
â”‚  â€¢ Views                            â”‚
â”‚  â€¢ ViewModels                       â”‚
â”‚  â€¢ Components                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ Uses â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENTS LAYER (Coming)          â”‚
â”‚                                     â”‚
â”‚  â€¢ StatButton                       â”‚
â”‚  â€¢ TeamScoreButton                  â”‚
â”‚  â€¢ PlayerCard                       â”‚
â”‚  â€¢ GameSummary                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ Uses â†“
  Current Phase 1 Foundation
```

---

## Summary

Phase 1 provides:
- âœ… **Solid foundation** for data persistence
- âœ… **Design system** for consistent UI
- âœ… **Domain models** for business logic
- âœ… **Test coverage** for reliability
- âœ… **Clean architecture** for scalability

Ready to build features in Part 2! ğŸš€
